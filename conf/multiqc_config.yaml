title: "MD Genomics Metagenomic Analysis Report"

report_comment: >
    This report has been generated by the MD Genomics Metagenomic Analysis
     pipeline.

run_modules:
    - custom_content
    - fastqc

module_order:
    - custom_content
    - fastqc:
        name: 'FastQC (Raw reads)'
        anchor: 'fastqc_raw'
        info: 'This section of the report shows FastQC results on the raw reads.'
        path_filters_exclude:
            - './fastqc_QCd/*_fastqc.zip'
    - fastqc:
        name: 'FastQC (QCd reads)'
        anchor: 'fastqc_qcd'
        info: 'This section of the report shows FastQC results after the QC.'
        path_filters:
            - './fastqc_raw/*_fastqc.zip'


sample_names_replace_regex: true
sample_names_replace_exact: true
skip_generalstats: false
max_table_rows: 99999

# Report order
report_section_order:
    fastqc_raw:
      order: 20
    deduplication:
      order: 19
    synthetic-contaminants:
      order: 18
    trimming:
      order: 17
    indexing-foreign-genome:
      order: 16
    decontamination:
      order: 15
    fastqc_qcd:
      order: 14
    merge_paired_end_cleaned:
      order: 13
    metaphlan:
      order: 12
    humann:
      order: 11
    alpha-diversity:
      order: 10
    software-versions:
      order: -1
    workflow-summary:
      order: -2

custom_data:
  Clumpify:
    plot_type: "generalstats"
    pconfig:
      - raw:
          title: "Raw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
          description: "Total reads prior to QC"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 899
      - deduped:
          title: "Deduplicated"
          description: "Total deduplicated reads"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 900
  BBDuk:
    plot_type: "generalstats"
    pconfig:
      - synDecontam:
          title: "Decontaminated"
          description: "Total reads surviving removal of synthetic contaminants"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 901
      - trimmed:
          title: "Trimmed&nbsp;&nbsp;"
          description: "Total reads surviving post-trimming length filter"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 902
  BBMap:
    plot_type: "generalstats"
    pconfig:
      - host:
          title: "Host Reads"
          description: "Total reads mapped to host genome and removed."
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 903
      - qcd:
          title: "Final&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
          description: "Total reads passing QC."
          min: 0
          scale: "Greens"
          format: "{:,.0f}"
          placement: 904
  Metaphlan:
    plot_type: "generalstats"
    pconfig:
      - nSpecies:
          title: "Species"
          description: "Total species found"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 1101
  Humann:
    plot_type: "generalstats"
    pconfig:
      - gene_families_nucleotide:
          title: "G.Fam (Nucleotide)"
          description: "Gene families found by nucleotide alignment"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 1103
      - contributing_nucleotide:
          title: "% Contributing (Nucleotide)"
          description: "Percent of QCd reads contributing to functional profile after nucleotide alignment"
          min: 0
          max: 100
          scale: "Greens"
          suffix: "%"
          placement: 1104
      - gene_families_final:
          title: "G.Fam (Final)"
          description: "Gene families found by nucleotide and translated alignment"
          min: 0
          scale: "Blues"
          placement: 1105
      - perc_contributing_final:
          title: "% Contributing (Final)"
          description: "Percent of QCd reads contributing to functional profile after nucleotide and translated alignment"
          min: 0
          max: 100
          scale: "Greens"
          placement: 1106
      - n_contributing_final:
          title: "Reads Contributing (Final)"
          description: "Count of QCd reads contributing to functional profile after nucleotide and translated alignment"
          min: 0
          scale: "Greens"
          placement: 1107
      - unmapped:
          title: "Unmapped"
          description: "Reads not mapping to any significantly abundant microbial species (see documentation on HUMAnN prescreen)"
          min: 0
          scale: "Blues"
          placement: 1108
  host_microbial_composition:
    file_format: "tsv"
    section_name: "Host/Microbial Composition"
    description: "Composition of each sample categorized as host or microbial"
    plot_type: "bargraph"
    pconfig:
      id: "host_microbial_composition"
      title: "Summary: Host/Microbial Composition"
      xlab: "Sample"
      ylab: "Reads"
      ymin: 0
      yMinRange: 100
      yDecimals: false
      tt_suffix: "QC'd reads"

sp:
  Clumpify:
    fn: "dedup_data.txt"
  BBDuk:
    fn: "bbduk_data.txt"
  BBMap:
    fn: "decontam_data.txt"
  Metaphlan:
    fn: "profile_taxa_data.txt"
  Humann:
    fn: "profile_functions_data.txt"
  host_microbial_composition:
    fn: "host_microbial_composition.txt"
  genstats:
    fn: "multiqc_general_stats.txt"

table_columns_placement:
  FastQC (Raw reads):
    percent_duplicates: 1
    percent_gc: 2
    avg_sequence_length: 3
    percent_fails: 4
    total_sequences: 5

table_columns_visible:
    'FastQC (Raw reads)': 
      avg_sequence_length: True
      total_sequences: False
    'FastQC (QCd reads)': 
      avg_sequence_length: True
      total_sequences: False
