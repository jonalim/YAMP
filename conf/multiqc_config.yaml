title: "MD Genomics Metagenomic Analysis Report"
subtitle: >
    This report has been generated by the MD Genomics Metagenomic Analysis
     pipeline.
intro_text: ""
# report_comment: Text that goes in a blue box below the intro text

show_analysis_paths: False

custom_logo: "{logo}"
custom_logo_url: "https://marylandgenomics.com/"
custom_logo_title: "Maryland Genomics"

# report_header_info:
#   - Application Type: "Shotgun metagenome sequencing"
#   - Sequencing Platform: "HiSeq 2500"
#   - Sequencing Setup: "2x151bp"

run_modules:
    - custom_content
    - fastqc

module_order:
    - custom_content
    - fastqc:
        name: 'FastQC (Raw reads)'
        anchor: 'fastqc_raw'
        info: 'This section of the report shows FastQC results on the raw reads.'
        path_filters_exclude:
            - './fastqc_QCd/*_fastqc.zip'
    - fastqc:
        name: 'FastQC (QCd reads)'
        anchor: 'fastqc_qcd'
        info: 'This section of the report shows FastQC results after the QC.'
        path_filters_exclude:
            - './fastqc_raw/*_fastqc.zip'

skip_generalstats: false
max_table_rows: 99999

# Report order
report_section_order:
    fastqc_raw:
      order: 20
    fastqc_qcd:
      order: 14
    software_versions:
      order: -1
    workflow-summary:
      order: -2

custom_data:
  QC:
    plot_type: "generalstats"
    pconfig:
      - raw:
          title: "Raw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
          description: "Clumpify: Total reads prior to QC"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 899
      - deduped:
          title: "Deduplicated"
          description: "Clumpify: Total deduplicated reads"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 900
      - synDecontam:
          title: "Decontaminated"
          description: "BBDuk: Total reads surviving removal of synthetic contaminants"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 901
      - trimmed:
          title: "Trimmed&nbsp;&nbsp;"
          description: "BBDuk: Total reads surviving post-trimming length filter"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 902
      - host:
          title: "Host Reads"
          description: "BBMap: Total reads mapped to host genome and removed."
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 903
      - qcd:
          title: "Final&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
          description: "Total reads passing QC."
          min: 0
          scale: "Greens"
          format: "{:,.0f}"
          placement: 904
  Profiling:
    plot_type: "generalstats"
    pconfig:
      - nSpecies:
          title: "Species"
          description: "Metaphlan: Total species found"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 1101
      - gene_families_nucleotide:
          title: "G.Fam (Nucleotide)"
          description: "Humann: Gene families found by nucleotide alignment"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 1103
      - contributing_nucleotide:
          title: "% Contributing (Nucleotide)"
          description: "Humann: Percent of QCd reads contributing to functional profile after nucleotide alignment"
          min: 0
          max: 100
          scale: "Greens"
          suffix: "%"
          placement: 1104
      - gene_families_final:
          title: "G.Fam (Final)"
          description: "Humann: Gene families found by nucleotide and translated alignment"
          min: 0
          scale: "Blues"
          placement: 1105
      - perc_contributing_final:
          title: "% Contributing (Final)"
          description: "Humann: Percent of QCd reads contributing to functional profile after nucleotide and translated alignment"
          min: 0
          max: 100
          scale: "Greens"
          placement: 1106
      - n_contributing_final:
          title: "Reads Contributing (Final)"
          description: "Humann: Count of QCd reads contributing to functional profile after nucleotide and translated alignment"
          min: 0
          scale: "Greens"
          placement: 1107
      - unmapped:
          title: "Unmapped"
          description: "Humann: Reads not mapping to any significantly abundant microbial species (see documentation on HUMAnN prescreen)"
          min: 0
          scale: "Blues"
          placement: 1108
  host_microbial_composition:
    file_format: "tsv"
    section_name: "Host/Microbial Composition"
    description: "Composition of each sample categorized as host or microbial"
    plot_type: "bargraph"
    categories:
      Microbial:
        color: "#90ed7d"
      Host:
        color: "#7cb5ec"
      Unmapped:
        color: "#434348"
    pconfig:
      id: "host_microbial_composition"
      title: "Summary: Host/Microbial Composition"
      xlab: "Sample"
      ylab: "Reads"
      ymin: 0
      yMinRange: 100
      yDecimals: false
      tt_suffix: " QC'd reads"

sp:
  QC:
    fn: "qc_stats.txt"
  Profiling:
    fn: "profiling_stats.txt"
  host_microbial_composition:
    fn: "host_microbial_composition.txt"

table_columns_placement:
  FastQC (Raw reads):
    percent_duplicates: 1
    percent_gc: 2
    avg_sequence_length: 3
    percent_fails: 4
    total_sequences: 5

table_columns_visible:
    'FastQC (Raw reads)': 
      avg_sequence_length: True
      total_sequences: False
    'FastQC (QCd reads)': 
      avg_sequence_length: True
      total_sequences: False
