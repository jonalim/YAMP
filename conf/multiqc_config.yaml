title: "MD Genomics Metagenomic Analysis Report"

report_comment: >
    This report has been generated by the MD Genomics Metagenomic Analysis
     pipeline.

data_format: 'yaml'

run_modules:
    - custom_content
    - fastqc

module_order:
    - custom_content
    - fastqc:
        name: 'FastQC (Raw reads)'
        anchor: 'fastqc_raw'
        info: 'This section of the report shows FastQC results on the raw reads.'
        path_filters_exclude:
            - './fastqc_QCd/*_fastqc.zip'
    - fastqc:
        name: 'FastQC (QCd reads)'
        anchor: 'fastqc_qcd'
        info: 'This section of the report shows FastQC results after the QC.'
        path_filters:
            - './fastqc_QCd/*_fastqc.zip'


sample_names_replace_regex: true
sample_names_replace_exact: true
skip_generalstats: false

# Report order
report_section_order:
    fastqc_raw:
      order: 20
    deduplication:
      order: 19
    synthetic-contaminants:
      order: 18
    trimming:
      order: 17
    indexing-foreign-genome:
      order: 16
    decontamination:
      order: 15
    fastqc_qcd:
      order: 14
    merge_paired_end_cleaned:
      order: 13
    metaphlan:
      order: 12
    humann:
      order: 11
    alpha-diversity:
      order: 10
    software-versions:
      order: -1
    workflow-summary:
      order: -2

custom_data:
  Clumpify:
    plot_type: "generalstats"
    pconfig:
      - raw:
          title: "Raw"
          description: "Total reads prior to QC"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 899
      - deduped:
          title: "Deduplicated"
          description: "Total deduplicated reads"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 900
  BBDuk:
    plot_type: "generalstats"
    pconfig:
      - synDecontam:
          title: "Decontaminated"
          description: "Total reads surviving removal of synthetic contaminants"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 901
      - trimmed:
          title: "Trimmed"
          description: "Total reads surviving post-trimming length filter"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 902
  BBMap:
    plot_type: "generalstats"
    pconfig:
      - decontam:
          title: "Host Removed"
          description: "Total reads surviving removal of host reads. This is the last QC step."
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 903
  Metaphlan:
    plot_type: "generalstats"
    pconfig:
      - nSpecies:
          title: "Species"
          description: "Total species identified"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 1101
  Humann:
    plot_type: "generalstats"
    pconfig:
      - percExplained:
          title: "% Explained"
          description: "Percent of QCd microbiome explained by identified species"
          min: 0
          max: 100
          scale: "Greens"
          suffix: "%"
          placement: 1102
      - tot_reads_aligned_nucleotide:
          title: "Reads aligned by nucleotide search"
          description: "Reads aligned by Bowtie nucleotide search"
          min: 0
          max: 100
          scale: "Greens"
          suffix: "%"
          placement: 1103
      - unaligned_reads_nucleotide:
          title: "Unaligned by nucleotide search"
          description: "Reads left unaligned by Bowtie nucleotide search"
          min: 0
          max: 100
          scale: "Oranges"
          suffix: "%"
          placement: 1104
          hidden: True
      - tot_reads_aligned_both:
          title: "Total reads aligned"
          description: "Reads aligned by Bowtie nucleotide search or DIAMOND translated search"
          min: 0
          max: 100
          scale: "Greens"
          suffix: "%"
          placement: 1105
      - unaligned_reads_translated:
          title: "Final unaligned reads"
          description: "Reads aligned by neither Bowtie nucleotide search nor DIAMOND translated search"
          min: 0
          max: 100
          scale: "Oranges"
          suffix: "%"
          placement: 1106
      - geneFamilies:
          title: "G.Fam"
          description: "Total gene families"
          min: 0
          scale: "Blues"
          format: "{:,.0f}"
          placement: 1107
sp:
  Clumpify:
    fn: "dedup_data.txt"
  BBDuk:
    fn: "bbduk_data.txt"
  BBMap:
    fn: "decontam_data.txt"
  Metaphlan:
    fn: "profile_taxa_data.txt"
  Humann:
    fn: "profile_functions_data.txt"

table_columns_placement:
  FastQC (Raw reads):
    percent_duplicates: 1
    percent_gc: 2
    avg_sequence_length: 3
    percent_fails: 4
    total_sequences: 5

table_columns_visible:
    'FastQC (Raw reads)': 
      avg_sequence_length: True
      total_sequences: True
    'FastQC (QCd reads)': 
      avg_sequence_length: True
      total_sequences: True
